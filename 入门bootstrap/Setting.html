<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <!--声明文档兼容模式，表示使用IE浏览器的最新模式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--设置视口的宽度(值为设备的理想宽度)，页面初始缩放值<理想宽度/可见宽度>-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap基本模板</title>

    <!-- 引入Bootstrap核心样式文件 -->
    <link href="../bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bootstrap-3.3.7-dist/css/bootstrapValidator.min.css" rel="stylesheet" />
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <style>
        input[type=number]
        {
            display: inline;
            text-align: right;
            float: right;
            width: 50%;
            border: 1px solid #DBDBDB;
        }
        select
        {
            float: right;
            text-align: center;
        }
        table
        {
            margin-top: 15px;
            background-color: white;
            box-shadow: 2px 2px 1px #e5e8eF;
        }
        div.button
        {
            height: 40px;
            width: 280px;
            background-color: #2e6da4;
            color: white;
            border-radius: 8px;
            text-align: center;
            margin: 0 auto;
            margin-bottom: 20px;
        }
        h4
        {
           padding-top: 9px;
        }
        body
        {
            background-color: #F5F8FF;
        }
        label
        {
            display: inline;
        }
        .form-control-feedback{
            position: absolute;
            top: 8px!important;
        }

    </style>

</head>


<body>
    <div class="container">
        <form id="accountForm">
            <table class="table table-striped table-bordered ">
                <tr>
                    <td class="form-group">
                        <label class="control-label">有线通讯地址:</label>
                        <input name="aa" type="number" pattern="[0-9]*"  placeholder="1~255" onkeyup="value=value.replace(/[^1234567890]/g,'') " class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
                <tr>
                    <td>
                        <label class="control-label">有线通讯波特率：</label>
                        <select name="ab">
                            <option>600</option>
                            <option>1200</option>
                            <option selected="selected">2400</option>
                            <option>4800</option>
                            <option>9600</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <label class="control-label">控制方式:</label>
                        <select name="ac">
                            <option value="0">开度</option>
                            <option value="1">压差</option>
                            <option value="2">回水温度</option>
                            <option value="3">温差</option>
                            <option value="4">自检</option>
                        </select>
                    </td>
                </tr>
            </table>
            <table class="table table-striped table-bordered">
                <tr>
                    <td class="form-group">
                        <label class="control-label">有线通讯校验位：</label>
                        <span style="float: right">
                            <input type="radio" name="ba">&nbsp奇 &nbsp&nbsp
                            <input type="radio" name="ba">&nbsp偶 &nbsp&nbsp
                            <input type="radio" name="ba">&nbsp无 &nbsp&nbsp
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="form-group">
                        <label class="control-label">有线通讯停止位：</label>
                        <span style="float: right">
                            <input type="radio" name="bb">&nbsp1 &nbsp&nbsp
                            <input type="radio" name="bb">&nbsp1.5 &nbsp&nbsp
                            <input type="radio" name="bb">&nbsp2 &nbsp&nbsp
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="form-group">
                        <label class="control-label">运行模式:</label>
                        <span style="float: right">
                            <input type="radio" name="bc">&nbsp手动 &nbsp&nbsp
                            <input type="radio" name="bc">&nbsp自动 &nbsp&nbsp
                       </span>
                    </td>
                </tr>
            </table>

            <table class="table table-striped table-bordered">
                <tr>
                    <td class="form-group">
                        <label class="control-label">开度设置(%)：</label>
                        <input name="ca" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890]/g,'') " placeholder="0~100" class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
                <tr>
                    <td class="form-group">
                        <label class="control-label">压差设置(bar)：</label>
                        <input name="cb" type="number" step="0.1" onkeyup="value=value.replace(/[^1234567890.]/g,'')" placeholder="0~1.6" class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
                <tr>
                    <td class="form-group">
                        <label class="control-label">回水温度设置(℃)：</label>
                        <input  name="cc" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890]/g,'') " placeholder="0~99" class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
                <tr>
                    <td class="form-group">
                        <label class="control-label">温差设置(℃)：</label>
                        <input name="cd" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890]/g,'') " placeholder="0~99" class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
            </table>
            <button type="submit" class="btn">Submit</button>
        </form>
        <div align="center" class="button" onclick="submitButtClick()"><h4>确定</h4></div>

    </div>



    <script type="text/javascript" src="../js/vendor/jquery-3.2.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/js/bootstrapValidator.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/js/zh_CN.js"></script>

    <script>

        $(function () {
            $('#accountForm').bootstrapValidator({
                excluded: [':disabled'],
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    aa: {
                        validators: {
                            notEmpty: {
                                message: '请输入有线通讯地址！'
                            },
                            lessThan: {
                                value: 255,
                                inclusive: true,
                                message: '取值范围1～255'
                            },
                            greaterThan: {
                                value: 1,
                                inclusive: true,
                                message: '取值范围1～255'
                            },
                        },

                    },
                    ba: {
                        validators: {
                            notEmpty: {
                                message: '请选择有线通讯校验位！'
                            }
                        }
                    },
                    bb: {
                        validators: {
                            notEmpty: {
                                message: '请选择有线通讯停止位！'
                            }
                        }
                    },
                    bc: {
                        validators: {
                            notEmpty: {
                                message: '请选择运行模式！'
                            }
                        }
                    },
                    ca: {
                        validators: {
                            notEmpty: {
                                message: '请输入开度设置！'
                            },
                            lessThan: {
                                value: 100,
                                inclusive: true,
                                message: '取值范围0～100'
                            },
                            greaterThan: {
                                value: 0,
                                inclusive: true,
                                message: '取值范围0～99'
                            }
                        }
                    },
                    cb: {
                        validators: {
                            notEmpty: {
                                message: '请输入压差设置！'
                            },
                            lessThan: {
                                value: 1.6,
                                inclusive: true,
                                message: '取值范围0～1.6'
                            },
                            greaterThan: {
                                value: 0,
                                inclusive: true,
                                message: '取值范围0～1.6'
                            },
                            stringLength: {
                                min: 1,
                                max: 3,
                                message: '请输入有效的数字'
                            }
                        }
                    },
                    cc: {
                        validators: {
                            notEmpty: {
                                message: '请输入回水温度设置！'
                            },
                            lessThan: {
                                value: 99,
                                inclusive: true,
                                message: '取值范围0～99'
                            },
                            greaterThan: {
                                value: 0,
                                inclusive: true,
                                message: '取值范围0～99'
                            }
                        }
                    },
                    cd: {
                        validators: {
                            notEmpty: {
                                message: '请输入温差设置！'
                            },
                            lessThan: {
                                value: 99,
                                inclusive: true,
                                message: '取值范围0～99'
                            },
                            greaterThan: {
                                value: 0,
                                inclusive: true,
                                message: '取值范围0～99'
                            }
                        }
                    },
                }
            });
        });


        $(function() {
                   $('input[type=number]').on('click', function () {
                       var target = this;
                        // 使用定时器是为了让输入框上滑时更加自然
                      setTimeout(function(){
                          $("div.button").css("margin-bottom","260px");
                             target.scrollIntoView(true);
                      },0);
                     });
                   $("input").blur(function () {
                       $("div.button").css("margin-bottom","20px");
                   })

        })


        //JS 与原生交互
        function setupWebViewJavascriptBridge(callback)
        {
            if (window.WebViewJavascriptBridge)
            {
                return callback(WebViewJavascriptBridge);
            }
            if (window.WVJBCallbacks)
            {
                return window.WVJBCallbacks.push(callback);
            }
            window.WVJBCallbacks = [callback];
            var WVJBIframe = document.createElement('iframe');
            WVJBIframe.style.display = 'none';
            WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
            document.documentElement.appendChild(WVJBIframe);
            setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
        }

        setupWebViewJavascriptBridge(function(bridge){
            bridge.registerHandler('testJSFunction', function(data, responseCallback) {
                //在oc的webview有代理方法拦截这个弹窗，从而进行交互
                alert('JS方法被调用:'+data);
                responseCallback('js执行过了');
            })
        })

        function submitButtClick()
        {

//            alert(00000);
//            $("#accountForm").bootstrapValidator('validate');//提交验证
//            alert(123);
//            if ($("#accountForm").data('bootstrapValidator').isValid())
//            {
//                //获取验证结果，如果成功，执行下面代码
//                alert("yes");//验证成功后的操作，如ajax
//            }
//        var obj=new Object();
//            $(".form-control").each(function (i) {
//                obj[this.name] = this.value;
//
//            })
//            WebViewJavascriptBridge.callHandler('submitButtClick',obj,function(response) {
//            });
        }


    </script>
</body>

</html>
