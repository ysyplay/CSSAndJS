<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <!--声明文档兼容模式，表示使用IE浏览器的最新模式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--设置视口的宽度(值为设备的理想宽度)，页面初始缩放值<理想宽度/可见宽度>-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap基本模板</title>

    <!-- 引入Bootstrap核心样式文件 -->
    <link href="../bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bootstrap-3.3.7-dist/css/bootstrapValidator.min.css" rel="stylesheet" />
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <style>
        input[type=number]
        {

            text-align: right;
            float: right;
            width: 50%;
            border: 1px solid #DBDBDB;
        }
        select
        {
            float: right;
            display: inline-block;
            text-align: center;
        }
        table
        {
            margin-top: 15px;
            background-color: white;
            box-shadow: 2px 2px 1px #e5e8eF;
        }
        div.button
        {
            height: 40px;
            width: 280px;
            background-color: #2e6da4;
            color: white;
            border-radius: 8px;
            text-align: center;
            margin: 0 auto;
            margin-bottom: 20px;
        }
        h4
        {
           padding-top: 9px;
        }
        body
        {
            background-color: #F5F8FF;
        }
        .form-control-feedback{
            top: 7px;
            right: 0;
        }
    </style>

</head>


<body>
    <div class="container">
        <form id="accountForm">
            <table class="table table-striped table-bordered ">
                <tr>
                    <td class="form-group">
                        有线通讯地址:
                        <input name="fullName" type="number" pattern="[0-9]*"  placeholder="1~255" onkeyup="value=value.replace(/[^1234567890.]/g,'') " class="form-control" style="padding-right: 20px">
                    </td>
                </tr>
                <tr>
                    <td>有线通讯波特率：
                        <select name="0-1">
                            <option>600</option>
                            <option>1200</option>
                            <option selected="selected">2400</option>
                            <option>4800</option>
                            <option>9600</option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>控制方式:
                        <select name="0-2">
                            <option value="0">开度</option>
                            <option value="1">压差</option>
                            <option value="2">回水温度</option>
                            <option value="3">温差</option>
                            <option value="4">自检</option>
                        </select>
                    </td>
                </tr>
            </table>

            <table class="table table-striped table-bordered">
                <tr>
                    <td>有线通讯校验位：
                        <span style="float: right">
                        <input type="radio" name="1-0">&nbsp奇 &nbsp&nbsp
                        <input type="radio" name="1-0">&nbsp偶 &nbsp&nbsp
                        <input type="radio" name="1-0">&nbsp无 &nbsp&nbsp
                    </span>
                    </td>
                </tr>
                <tr>
                    <td>有线通讯停止位：
                        <span style="float: right">
                        <input type="radio" name="1-1">&nbsp1 &nbsp&nbsp
                        <input type="radio" name="1-1">&nbsp1.5 &nbsp&nbsp
                        <input type="radio" name="1-1">&nbsp2 &nbsp&nbsp
                    </span>
                    </td>
                </tr>
                <tr>
                    <td>运行模式:
                        <span style="float: right">
                        <input type="radio" name="1-2">&nbsp手动 &nbsp&nbsp
                        <input type="radio" name="1-2">&nbsp自动 &nbsp&nbsp
                    </span>
                    </td>
                </tr>
            </table>

            <table class="table table-striped table-bordered">
                <tr>
                    <td>开度设置(%)：<input name="2-0" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890.]/g,'') " placeholder="0~100" class="form-control" style="padding-right: 20px"></td>
                </tr>
                <tr>
                    <td>压差设置(bar)：<input name="2-1" type="number" onkeyup="value=value.replace(/[^1234567890.]/g,'') "
                                         placeholder="0~1.6" class="form-control" style="padding-right: 20px"></td>
                </tr>
                <tr>
                    <td>回水温度设置(℃)：<input  name="2-2" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890.]/g,'') " placeholder="0~99" class="form-control" style="padding-right: 20px"></td>
                </tr>
                <tr>
                    <td class="form-group">温差设置(℃)：<input name="company" type="number" pattern="[0-9]*" onkeyup="value=value.replace(/[^1234567890.]/g,'') " placeholder="0~99" class="form-control" style="padding-right: 20px"></td>
                </tr>
            </table>

            <button type="submit" class="btn">Submit</button>
        </form>
        <div align="center" class="button" onclick="submitButtClick()"><h4>确定</h4></div>

    </div>



    <script type="text/javascript" src="../js/vendor/jquery-3.2.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="../bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="../bootstrap-3.3.7-dist/js/bootstrapValidator.min.js"></script>

    <script>

        $(function () {
            $('#accountForm').bootstrapValidator({
                excluded: [':disabled'],
                feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                    fullName: {
                        validators: {
                            notEmpty: {
                                message: 'The full name is required'
                            }
                        }
                    },
                    company: {
                        validators: {
                            notEmpty: {
                                message: 'The company name is required'
                            }
                        }
                    },
                    jobTitle: {
                        validators: {
                            notEmpty: {
                                message: 'The company name is required'
                            }
                        }
                    },
                    address: {
                        validators: {
                            notEmpty: {
                                message: 'The address is required'
                            }
                        }
                    },
                    city: {
                        validators: {
                            notEmpty: {
                                message: 'The city is required'
                            }
                        }
                    },
                    country: {
                        validators: {
                            notEmpty: {
                                message: 'The city is required'
                            }
                        }
                    }
                }
            });
        });
        $(function() {
                   $('input').on('click', function () {
                       var target = this;
                        // 使用定时器是为了让输入框上滑时更加自然
                       setTimeout(function(){
                             target.scrollIntoView(true);
                            },50);
                     });

        })



        //JS 与原生交互
        function setupWebViewJavascriptBridge(callback)
        {
            if (window.WebViewJavascriptBridge)
            {
                return callback(WebViewJavascriptBridge);
            }
            if (window.WVJBCallbacks)
            {
                return window.WVJBCallbacks.push(callback);
            }
            window.WVJBCallbacks = [callback];
            var WVJBIframe = document.createElement('iframe');
            WVJBIframe.style.display = 'none';
            WVJBIframe.src = 'wvjbscheme://__BRIDGE_LOADED__';
            document.documentElement.appendChild(WVJBIframe);
            setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
        }

        setupWebViewJavascriptBridge(function(bridge){
            bridge.registerHandler('testJSFunction', function(data, responseCallback) {
                //在oc的webview有代理方法拦截这个弹窗，从而进行交互
                alert('JS方法被调用:'+data);
                responseCallback('js执行过了');
            })
        })

        function submitButtClick()
        {

//            alert(00000);
//            $("#accountForm").bootstrapValidator('validate');//提交验证
//            alert(123);
//            if ($("#accountForm").data('bootstrapValidator').isValid())
//            {
//                //获取验证结果，如果成功，执行下面代码
//                alert("yes");//验证成功后的操作，如ajax
//            }
        var obj=new Object();
            $(".form-control").each(function (i) {
                obj[this.name] = this.value;

            })
            WebViewJavascriptBridge.callHandler('submitButtClick',obj,function(response) {
            });
        }


    </script>
</body>

</html>
